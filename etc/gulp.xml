<?xml version="1.0" encoding="UTF-8" ?>
<gulp
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="urn:magento:module:MaxBucknell_Gulp:etc/gulp.xsd"
>
    <task name="env">
        <command>env</command>
    </task>

    <task name="flatten:static">
        <dependencies>
            <package name="lodash" version="latest" />
            <package name="glob" version="latest" />
            <package name="mkdirp" version="latest" />
        </dependencies>

        <command>node MaxBucknell_Gulp/task/flatten/static.js</command>
    </task>

    <task name="flatten:templates">
        <dependencies>
            <package name="lodash" version="latest" />
            <package name="glob" version="latest" />
            <package name="mkdirp" version="latest" />
        </dependencies>

        <command>node MaxBucknell_Gulp/task/flatten/templates.js</command>
    </task>

    <task name="flatten">
        <dependencies>
            <package name="concurrently" version="latest" />
        </dependencies>

        <command>concurrently "npm run flatten:static" "npm run flatten:templates"</command>
    </task>

    <task name="clean:build">
        <dependencies>
            <package name="rimraf" version="latest" />
        </dependencies>

        <command>node MaxBucknell_Gulp/task/clean/build.js</command>
    </task>

    <task name="clean:pub">
        <dependencies>
            <package name="rimraf" version="latest" />
        </dependencies>

        <command>node MaxBucknell_Gulp/task/clean/pub.js</command>
    </task>

    <task name="clean">
        <command>concurrently "npm run clean:build" "npm run clean:pub"</command>
    </task>

    <task name="less">
        <dependencies>
            <package name="less" version="latest" />
            <package name="spawn-command" version="latest" />
            <package name="concurrently" version="latest" />
        </dependencies>
        <command>node MaxBucknell_Gulp/task/less.js 'lessc --source-map-map-inline --plugin=./MaxBucknell_Gulp/less/magento-import.js {{input}} > {{output}}'</command>
    </task>

    <task name="css">
        <command>concurrently "npm run less"</command>
    </task>
</gulp>